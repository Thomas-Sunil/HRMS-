@model hrms.Models.Employee

@{
    ViewData["Title"] = "My Dashboard";
    Layout = "~/Views/Shared/_EmployeeLayout.cshtml"; // Ensure this layout exists
}

@{
    // Cast the ViewBag.Projects to a known type to safely use it
    var projects = ViewBag.Projects as List<hrms.Models.Project>;
}

<div class="container">
    @if (Model != null)
    {
        <div class="text-center mb-4">
            <h1 class="display-4">Welcome, @Model.FullName</h1>
            <p class="lead">This is your personal dashboard.</p>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h3>My Assigned Projects</h3>
                @if (projects != null && projects.Any())
                {
                    <div class="list-group">
                        @foreach (var project in projects)
                        {
                            <div class="list-group-item">
                                <h5 class="mb-1">@project.Name</h5>
                                <p class="mb-1">@project.Description</p>
                                <small>Status: <span class="badge bg-primary">@project.Status</span></small>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="alert alert-info">You are not assigned to any projects.</div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-danger">Could not load employee details.</div>
    }
</div>