@{
    ViewData["Title"] = "Company Attendance";
    Layout = "~/Views/Shared/_HrLayout.cshtml";
}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Company-Wide Attendance Calendar</h2>
    </div>

    <!-- This is where the FullCalendar will be rendered -->
    <div class="table-container p-3">
        <div id="company-calendar"></div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('company-calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,listWeek' // listWeek is a useful view here
                },
                // The calendar will automatically call this URL to get its data
                events: '/Hr/GetCompanyAttendanceData',

                dayCellDidMount: function(arg) {
                    // Make weekends stand out
                    if (arg.date.getDay() === 0 || arg.date.getDay() === 6) { // Sunday or Saturday
                        arg.el.style.backgroundColor = '#f8f9fa';
                    }
                }
            });
            calendar.render();
        });
    </script>
}