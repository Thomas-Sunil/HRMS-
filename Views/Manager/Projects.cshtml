@model IEnumerable<hrms.Models.Project>
@{
    ViewData["Title"] = "Department Projects"; Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="card mb-5">
        <div class="card-header"><h4>Create New Project</h4></div>
        <div class="card-body">
            <form asp-action="CreateProject" method="post">
                <input name="projectName" class="form-control mb-2" placeholder="Project Name" required />
                <textarea name="projectDescription" class="form-control mb-2" placeholder="Description"></textarea>
                <input name="projectDeadline" type="date" class="form-control mb-2" />
                <button type="submit" class="btn btn-primary">Create Project</button>
            </form>
        </div>
    </div>

    <h4>Existing Projects</h4>
    <table class="table">
        @foreach (var project in Model)
        {
            <tr>
                <td><strong><a asp-action="ProjectDetails" asp-route-id="@project.Id">@project.Name</a></strong></td>
                <td>Assigned Members: @project.AssignedEmployees.Count</td>
                <td><a asp-action="ProjectDetails" asp-route-id="@project.Id" class="btn btn-sm btn-info">Details & Assign</a></td>
                <td>
                    <a asp-action="ProjectDetails" asp-route-id="@project.Id" class="btn btn-sm btn-info">Details</a>
                    <!-- ADD THIS FORM -->
                    <form asp-action="DeleteProject" method="post" class="d-inline">
                        <input type="hidden" name="projectId" value="@project.Id" />
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this project?')">Delete</button>
                    </form>
                </td>
            </tr>
        }
    </table>
</div>